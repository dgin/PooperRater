define(function(t,e,i){var a=t("react");i.exports=a.createClass({displayName:"exports",propTypes:{name:a.PropTypes.string.isRequired,caption:a.PropTypes.string,ratingAmount:a.PropTypes.number.isRequired,rating:a.PropTypes.number,onRatingClick:a.PropTypes.func,disabled:a.PropTypes.bool,editing:a.PropTypes.bool,size:a.PropTypes.string},getStars:function(){for(var t="",e=this.props.ratingAmount,i=0;e>i;i++)t+="â˜…";return t},getDefaultProps:function(){return{step:.5,ratingAmount:5,onRatingClick:function(){},disabled:!1}},getInitialState:function(){return{ratingCache:{pos:0,rating:0},editing:this.props.editing||!0,stars:5,rating:0,pos:0,glyph:this.getStars()}},componentWillMount:function(){if(this.min=0,this.max=this.props.ratingAmount||5,this.props.rating){this.state.editing=!1;var t=this.props.rating;this.setState({rating:t,pos:this.getStarRatingPosition(t)})}},componentDidMount:function(){this.root=this.refs.root.getDOMNode(),this.ratingStars=this.refs.ratingStars.getDOMNode(),this.ratingContainer=this.refs.ratingContainer.getDOMNode()},componentWillUnmount:function(){delete this.root,delete this.ratingStars,delete this.ratingContainer},getPosition:function(t){return t.pageX-this.root.getBoundingClientRect().left},applyPrecision:function(t,e){return parseFloat(t.toFixed(e))},getDecimalPlaces:function(t){var e=(""+t).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return e?Math.max(0,(e[1]?e[1].length:0)-(e[2]?+e[2]:0)):0},getWidthFromValue:function(t){var e=this.min,i=this.max;return e>=t||e===i?0:t>=i?100:100*(t-e)/(i-e)},getValueFromPosition:function(t){var e=this.getDecimalPlaces(this.props.step),i=this.ratingContainer.offsetWidth,a=this.max-this.min,n=a*t/(i*this.props.step);n=Math.ceil(n);var s=this.applyPrecision(parseFloat(this.min+n*this.props.step),e);return s=Math.max(Math.min(s,this.max),this.min)},calculate:function(t){var e=this.getValueFromPosition(t),i=this.getWidthFromValue(e);return i+="%",{width:i,val:e}},getStarRatingPosition:function(t){var e=this.getWidthFromValue(t);return e+="%"},getRatingEvent:function(t){var e=this.getPosition(t);return this.calculate(e)},handleMouseLeave:function(){this.setState({pos:this.state.ratingCache.pos,rating:this.state.ratingCache.rating})},handleMouseMove:function(t){var e=this.getRatingEvent(t);this.setState({pos:e.width,rating:e.val})},shouldComponentUpdate:function(t,e){return e.ratingCache.rating!==this.state.ratingCache.rating||e.rating!==this.state.rating},handleClick:function(t){if(this.props.disabled)return t.stopPropagation(),t.preventDefault(),!1;var e={pos:this.state.pos,rating:this.state.rating,caption:this.props.caption,name:this.props.name};this.setState({ratingCache:e}),this.props.onRatingClick(t,e)},treatName:function(t){return"string"==typeof t?t.toLowerCase().split(" ").join("_"):void 0},getClasses:function(){var t=["react-star-rating__root"];if(this.props.disabled&&t.push("rating-disabled"),this.props.size)switch(this.props.size){case"sm":t.push("react-star-rating__size--sm");break;case"md":t.push("react-star-rating__size--md");break;case"lg":t.push("react-star-rating__size--lg")}return this.state.editing&&t.push("rating-editing"),t.join(" ")},render:function(){var t=null;this.props.caption&&(t=a.createElement("span",{className:"react-rating-caption"},this.props.caption));var e,i=this.getClasses();return e=this.state.editing?a.createElement("div",{ref:"ratingContainer",className:"rating-container rating-gly-star","data-content":this.state.glyph,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onClick:this.handleClick},a.createElement("div",{ref:"ratingStars",className:"rating-stars","data-content":this.state.glyph,style:{width:this.state.pos}}),a.createElement("input",{type:"number",name:this.props.name,value:this.state.ratingCache.rating,style:{display:"none !important"},min:this.min,max:this.max,readOnly:!0})):a.createElement("div",{ref:"ratingContainer",className:"rating-container rating-gly-star","data-content":this.state.glyph},a.createElement("div",{ref:"ratingStars",className:"rating-stars","data-content":this.state.glyph,style:{width:this.state.pos}}),a.createElement("input",{type:"number",name:this.props.name,value:this.state.ratingCache.rating,style:{display:"none !important"},min:this.min,max:this.max,readOnly:!0})),a.createElement("span",{className:"react-star-rating"},t,a.createElement("span",{ref:"root",className:i},e))}})});